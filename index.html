<!DOCTYPE html><!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Proje Takip Sistemi</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    /* GENEL TASARIM */
body {
  font-family: "Helvetica Neue", Arial, sans-serif;
  background: #f2f2f2;
  margin: 0;
  padding: 0;
  display: flex;
  height: 100vh;
}

/* SOL KISIM: PROJELER */
.projects-container {
  flex: 2;
  padding: 20px;
  overflow-y: auto;
}

/* SAƒû KISIM: YENƒ∞ PROJE EKLEME PANELƒ∞ */
.input-panel {
  flex: 1;
  background: #ffffff;
  padding: 20px;
  border-left: 4px solid #000;
  box-shadow: -5px 0px 15px rgba(0,0,0,0.05);
}
#form-panel {
      width: 350px;
      background: #fff;
      padding: 20px;
      box-shadow: -2px 0 5px rgba(0,0,0,0.1);
      margin-left: auto;
      margin-top: 60px;
      overflow-y: auto;
    }
    #projects {
      flex: 1;
      padding: 80px 20px 20px 20px;
      overflow-y: auto;
    }

/* BA≈ûLIK */
h1 {
  font-size: 28px;
  font-weight: bold;
  text-align: center;
  margin: 20px 0;
  color: #000;
  text-transform: uppercase;
  letter-spacing: 2px;
}

/* KART TASARIMI */
.project-card {
  background: #fff;
  border: 2px solid #000;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 20px;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
  transition: all 0.3s ease;
  position: relative;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.project-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}

/* KART BA≈ûLIƒûI */
.project-card h3 {
  margin: 0;
  font-size: 20px;
  font-weight: bold;
  color: #111;
}

/* TARƒ∞HLER */
.project-dates {
  font-size: 13px;
  color: #555;
  margin-top: 4px;
  margin-bottom: 10px;
}

/* BUTONLAR */
button {
  border: none;
  padding: 8px 14px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  margin: 5px 4px 0 0;
  transition: all 0.2s ease;
}

button:hover {
  opacity: 0.9;
}

.details-btn {
  background: #ffcc00;
  color: #000;
}

.delete-btn {
  background: #e53935;
  color: #fff;
}

.note-btn {
  background: #1976d2;
  color: #fff;
}

/* DETAYLAR PANELƒ∞ */
.project-details {
  margin-top: 12px;
  padding: 12px;
  border-top: 2px solid #000;
  background: #fafafa;
  display: none;
}

.project-details.open {
  display: block;
}

/* NOTLAR */
.note {
  font-size: 14px;
  padding: 6px 8px;
  margin-top: 6px;
  border-left: 4px solid #1976d2;
  background: #fff;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

/* FORM ELEMANLARI */
input, textarea, select {
  width: 100%;
  padding: 10px;
  margin: 6px 0;
  border: 2px solid #000;
  border-radius: 8px;
  font-size: 14px;
  box-sizing: border-box;
}

input:focus, textarea:focus, select:focus {
  outline: none;
  border-color: #1976d2;
}

/* RESPONSIVE */
@media (max-width: 900px) {
  body {
    flex-direction: column;
  }
  .input-panel {
    border-left: none;
    border-top: 4px solid #000;
  }
}
  </style>
</head>
<body>
  <header> <img src="logo.png" height="80">üìå Proje Takip Sistemi</header>

  <div id="projects"></div>

  <div id="form-panel">
    <h3>Yeni Proje Ekle</h3>
    <input id="title" placeholder="Proje Ba≈ülƒ±ƒüƒ±" style="width:100%;margin:5px 0;"><br>
    <textarea id="description" placeholder="Proje A√ßƒ±klamasƒ±" style="width:100%;margin:5px 0;"></textarea><br>
    <label>Ba≈ülangƒ±√ß Tarihi</label>
    <input type="date" id="startDate" style="width:100%;margin:5px 0;">
    <label>Biti≈ü Tarihi</label>
    <input type="date" id="endDate" style="width:100%;margin:5px 0;">
    <input id="proposal" placeholder="Teklif Linki" style="width:100%;margin:5px 0;">
    <input id="invoice" placeholder="Fatura Linki" style="width:100%;margin:5px 0;">
    <select id="type" style="width:100%;margin:5px 0;">
      <option value="3D Tasarƒ±m">3D Tasarƒ±m</option>
      <option value="Tersine M√ºhendislik">Tersine M√ºhendislik</option>
      <option value="Prototipleme">Prototipleme</option>
    </select>
    <input id="addedBy" placeholder="Ekleyen Ki≈üi" style="width:100%;margin:5px 0;">
    <button onclick="addProject()">Kaydet</button>
  </div>

  <script>
    // Firebase config buraya kendi config'ini koy
    const firebaseConfig = {
        apiKey: "AIzaSyCxwXtrXxHbC_LcIlbK_PRIQ4v5pXt1l6w",
        authDomain: "atolye1886projectmanagement.firebaseapp.com",
        databaseURL: "https://atolye1886projectmanagement-default-rtdb.firebaseio.com",
        projectId: "atolye1886projectmanagement",
        storageBucket: "atolye1886projectmanagement.firebasestorage.app",
        messagingSenderId: "852948318375",
        appId: "1:852948318375:web:609dd6544580d7d6430382"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Rastgele renk avatar
    function randomColor() {
      const colors = ["#ef4444","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899"];
      return colors[Math.floor(Math.random()*colors.length)];
    }

    function addProject() {
      const project = {
        title: document.getElementById("title").value,
        description: document.getElementById("description").value,
        startDate: document.getElementById("startDate").value,
        endDate: document.getElementById("endDate").value,
        proposal: document.getElementById("proposal").value,
        invoice: document.getElementById("invoice").value,
        type: document.getElementById("type").value,
        addedBy: document.getElementById("addedBy").value,
        avatarColor: randomColor(),
        createdAt: Date.now(),
        notes: {}
      };
      db.ref("projects").push(project);
      document.querySelectorAll("#form-panel input, #form-panel textarea").forEach(el=>el.value="");
    }

    function renderProjects(snapshot) {
      const projectsDiv = document.getElementById("projects");
      projectsDiv.innerHTML = "";
      let projects = [];
      snapshot.forEach(child => {
        projects.push({ id: child.key, ...child.val() });
      });
      projects.sort((a,b)=>b.createdAt - a.createdAt);
      projects.forEach(p=>{
        const card = document.createElement("div");
        card.className = "project-card";
        card.innerHTML = `
          <div class="project-header">
            <div class="profile">
              <div class="avatar" style="background:${p.avatarColor}"></div>
              <strong>${p.addedBy}</strong>
            </div>
            <button onclick="toggleDetails('${p.id}')">Detaylar</button>
          </div>
          <h4>${p.title}</h4>
          <div class="details" id="details-${p.id}">
            <p><b>A√ßƒ±klama:</b> ${p.description}</p>
            <p><b>T√ºr:</b> ${p.type}</p>
            <p><b>Ba≈ülangƒ±√ß:</b> ${p.startDate} | <b>Biti≈ü:</b> ${p.endDate}</p>
            <p><b>Teklif:</b> <a href="${p.proposal}" target="_blank">Link</a></p>
            <p><b>Fatura:</b> <a href="${p.invoice}" target="_blank">Link</a></p>
            <div id="notes-${p.id}"></div>
            <input id="noteInput-${p.id}" placeholder="Not ekle..." style="width:70%">
            <button onclick="addNote('${p.id}')">Ekle</button>
            <button onclick="deleteProject('${p.id}')">‚ùå Sil</button>
          </div>
        `;
        if (p.notes) {
          Object.values(p.notes).forEach(n=>{
            const noteDiv = document.createElement("div");
            noteDiv.className="note";
            noteDiv.innerText=`${n.date} - ${n.text}`;
            card.querySelector(`#notes-${p.id}`).appendChild(noteDiv);
          });
        }
        projectsDiv.appendChild(card);
      });
    }

    function toggleDetails(id) {
      const d = document.getElementById(`details-${id}`);
      d.style.display = (d.style.display==="block"?"none":"block");
    }

    function addNote(id) {
      const input = document.getElementById(`noteInput-${id}`);
      const text = input.value;
      if (!text) return;
      const note = { text, date: new Date().toLocaleString() };
      db.ref("projects/"+id+"/notes").push(note);
      input.value="";
    }

    function deleteProject(id) {
      if (confirm("Bu projeyi silmek istediƒüine emin misin?")) {
        db.ref("projects/"+id).remove();
      }
    }

    db.ref("projects").on("value", renderProjects);
  </script>
</body>
</html>






