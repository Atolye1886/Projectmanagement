<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Proje Takip Sistemi</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      background: #1e3a8a;
      color: white;
      padding: 15px;
      font-size: 22px;
      font-weight: bold;
      text-align: center;
    }
    main {
      display: flex;
      flex: 1;
    }
    #form-panel {
      width: 350px;
      background: white;
      padding: 20px;
      border-left: 1px solid #ccc;
    }
    #form-panel h2 {
      margin-top: 0;
      font-size: 18px;
    }
    #form-panel input, #form-panel select, #form-panel textarea {
      width: 100%;
      margin-bottom: 10px;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    #form-panel button {
      background: #1e3a8a;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
    }
    #projects {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    .project-card {
      background: white;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .project-card h3 {
      margin: 0 0 10px;
    }
    .project-meta {
      font-size: 14px;
      color: #555;
    }
    .notes {
      margin-top: 10px;
      padding: 10px;
      background: #f9fafb;
      border-radius: 6px;
    }
    .note {
      font-size: 13px;
      margin-bottom: 5px;
      padding: 4px 6px;
      border-left: 3px solid #1e3a8a;
      background: #fff;
    }
    .add-note {
      display: flex;
      margin-top: 8px;
    }
    .add-note input {
      flex: 1;
      padding: 6px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .add-note button {
      margin-left: 5px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
    }
    .delete-btn {
      margin-top: 10px;
      background: #dc2626 !important;
    }
  </style>
</head>
<body>
  <header>üìå Proje Takip Sistemi</header>
  <main>
    <div id="projects"></div>
    <div id="form-panel">
      <h2>Yeni Proje Ekle</h2>
      <input id="title" placeholder="Proje Ba≈ülƒ±ƒüƒ±">
      <textarea id="summary" placeholder="Kƒ±sa A√ßƒ±klama"></textarea>
      <select id="type">
        <option value="3D Tasarƒ±m">3D Tasarƒ±m</option>
        <option value="Tersine M√ºhendislik">Tersine M√ºhendislik</option>
        <option value="Prototipleme">Prototipleme</option>
      </select>
      <input id="startDate" type="date" placeholder="Ba≈ülangƒ±√ß Tarihi">
      <input id="endDate" type="date" placeholder="Biti≈ü Tarihi">
      <input id="proposalLink" placeholder="Proje Teklif Linki">
      <input id="invoiceLink" placeholder="Fatura Linki">
      <input id="purchaseInfo" placeholder="Satƒ±n Alma Bilgisi (opsiyonel)">
      <input id="author" placeholder="Adƒ±nƒ±z">
      <button onclick="addProject()">Kaydet</button>
    </div>
  </main>

  <script>
    // Firebase config BURAYA kendi configini koy!
    const firebaseConfig = {
        apiKey: "AIzaSyCxwXtrXxHbC_LcIlbK_PRIQ4v5pXt1l6w",
        authDomain: "atolye1886projectmanagement.firebaseapp.com",
        databaseURL: "https://atolye1886projectmanagement-default-rtdb.firebaseio.com",
        projectId: "atolye1886projectmanagement",
        storageBucket: "atolye1886projectmanagement.firebasestorage.app",
        messagingSenderId: "852948318375",
        appId: "1:852948318375:web:609dd6544580d7d6430382"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function addProject() {
      const project = {
        title: document.getElementById('title').value,
        summary: document.getElementById('summary').value,
        type: document.getElementById('type').value,
        startDate: document.getElementById('startDate').value,
        endDate: document.getElementById('endDate').value,
        proposalLink: document.getElementById('proposalLink').value,
        invoiceLink: document.getElementById('invoiceLink').value,
        purchaseInfo: document.getElementById('purchaseInfo').value,
        author: document.getElementById('author').value,
        createdAt: Date.now()
      };
      db.ref('projects').push(project);
      document.getElementById('form-panel').reset;
    }

    function deleteProject(id) {
      db.ref('projects/' + id).remove();
    }

    function addNote(projectId, noteText) {
      const note = {
        text: noteText,
        date: new Date().toLocaleString()
      };
      db.ref('projects/' + projectId + '/notes').push(note);
    }

    db.ref('projects').on('value', snapshot => {
      const projectsDiv = document.getElementById('projects');
      projectsDiv.innerHTML = "";
      snapshot.forEach(child => {
        const proj = child.val();
        const card = document.createElement('div');
        card.className = 'project-card';
        card.innerHTML = `
          <h3>${proj.title}</h3>
          <div class="project-meta">
            <b>T√ºr:</b> ${proj.type} <br>
            <b>Ba≈ülangƒ±√ß:</b> ${proj.startDate} - <b>Biti≈ü:</b> ${proj.endDate} <br>
            <b>Teklif:</b> <a href="${proj.proposalLink}" target="_blank">Link</a> |
            <b>Fatura:</b> <a href="${proj.invoiceLink}" target="_blank">Link</a> <br>
            <b>Satƒ±n Alma:</b> ${proj.purchaseInfo || '-'} <br>
            <b>Ekleyen:</b> ${proj.author}
          </div>
          <button class="delete-btn" onclick="deleteProject('${child.key}')">‚ùå Sil</button>
          <div class="notes" id="notes-${child.key}">
            <b>Notlar:</b>
          </div>
          <div class="add-note">
            <input id="note-input-${child.key}" placeholder="Not ekle...">
            <button onclick="addNote('${child.key}', document.getElementById('note-input-${child.key}').value)">Ekle</button>
          </div>
        `;
        projectsDiv.appendChild(card);

        if (proj.notes) {
          Object.values(proj.notes).forEach(note => {
            const noteDiv = document.createElement('div');
            noteDiv.className = 'note';
            noteDiv.innerText = `[${note.date}] ${note.text}`;
            card.querySelector(`#notes-${child.key}`).appendChild(noteDiv);
          });
        }
      });
    });
  </script>
</body>
</html>

